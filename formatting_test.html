<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Educational Response Formatting Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f8f9fa;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .before, .after {
            margin: 20px 0;
            padding: 15px;
            border-radius: 6px;
        }
        .before {
            background: #ffebee;
            border-left: 4px solid #f44336;
        }
        .after {
            background: #e8f5e8;
            border-left: 4px solid #4caf50;
        }
        .sample-response {
            border-left: 4px solid #ff4757;
            padding-left: 12px;
            margin-left: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎯 Educational Response Formatting Fix</h1>
        
        <div class="before">
            <h3>❌ Before (Single Paragraph Issue)</h3>
            <p><strong>Problem:</strong> All content appears as one long paragraph without proper sections, making it hard to read.</p>
        </div>
        
        <div class="after">
            <h3>✅ After (Properly Formatted)</h3>
            <p><strong>Solution:</strong> Content is properly formatted with headers, sections, and visual hierarchy for better student readability.</p>
        </div>
        
        <h2>📋 Sample Output with New Formatting:</h2>
        
        <div class="sample-response">
            <div style="color: #ff4757; font-weight: 600; margin-bottom: 12px; font-size: 16px;">🤖 Cuco's Answer:</div>
            <div style="color: #333; line-height: 1.6; font-size: 14px;" id="formatted-content">
                <!-- Content will be populated by JavaScript -->
            </div>
        </div>
        
        <button onclick="testFormatting()" style="background: #ff4757; color: white; border: none; padding: 10px 20px; border-radius: 5px; margin-top: 20px; cursor: pointer;">
            🧪 Test Formatting Function
        </button>
    </div>

    <script>
        // Function to format educational response with proper HTML
        function formatEducationalResponse(text) {
            if (!text) return 'No content available';
            
            // Convert the markdown-style formatting to HTML
            let formatted = text
                // Convert headers
                .replace(/^# (.*$)/gm, '<h2 style="color: #ff4757; font-size: 18px; font-weight: bold; margin: 16px 0 8px 0; border-bottom: 2px solid #ff4757; padding-bottom: 4px;">$1</h2>')
                .replace(/^## (.*$)/gm, '<h3 style="color: #2c3e50; font-size: 16px; font-weight: 600; margin: 14px 0 6px 0;">$1</h3>')
                .replace(/^### (.*$)/gm, '<h4 style="color: #34495e; font-size: 14px; font-weight: 600; margin: 10px 0 4px 0;">$1</h4>')
                
                // Convert learning objectives (special blockquote style)
                .replace(/^> \*\*(.*?)\*\*/gm, '<div style="background: #e8f4fd; border-left: 4px solid #3498db; padding: 10px; margin: 10px 0; border-radius: 4px; color: #2c3e50; font-weight: 500;">$1</div>')
                
                // Convert bold text
                .replace(/\*\*(.*?)\*\*/g, '<strong style="font-weight: 600; color: #2c3e50;">$1</strong>')
                
                // Convert bullet points
                .replace(/^- (.*$)/gm, '<li style="margin: 4px 0; padding-left: 4px;">$1</li>')
                
                // Wrap consecutive list items in ul tags
                .replace(/(<li[^>]*>.*<\/li>\s*)+/g, '<ul style="margin: 8px 0; padding-left: 20px;">$&</ul>')
                
                // Convert horizontal rules
                .replace(/^---$/gm, '<hr style="border: none; border-top: 1px solid #e0e0e0; margin: 16px 0;">')
                
                // Convert line breaks to HTML
                .replace(/\n\n/g, '<br><br>')
                .replace(/\n/g, '<br>');
            
            return formatted;
        }
        
        function testFormatting() {
            const sampleResponse = `# 🧬 Glycolysis - Cellular Energy Production

> **📚 Learning Objective:** By the end of this explanation, you'll understand how cells break down glucose to produce ATP through glycolysis.

---

## 🎯 Quick Summary

Glycolysis is the metabolic pathway that breaks down glucose (C6H12O6) into two molecules of pyruvate, producing ATP and NADH in the process.

**⏱️ Study Time:** 8-10 minutes | **📊 Difficulty:** 🟡 Intermediate

---

## 🔍 Definition & Overview

Glycolysis is a series of ten enzyme-catalyzed reactions that convert glucose into pyruvate. This ancient metabolic pathway is found in virtually all living organisms.

---

## 🔬 Key Concepts You Need to Know

### 1. 📝 Energy Investment Phase

- **What it is:** The first five steps where the cell "invests" 2 ATP molecules
- **Why it matters:** This investment is necessary to destabilize glucose
- **Key terms:** Hexokinase, phosphofructokinase

### 2. ⚙️ Energy Payoff Phase

**Step-by-step breakdown:**

1. **Glyceraldehyde-3-phosphate oxidation** 🚀 - NADH is produced
2. **ATP synthesis** ➡️ - 4 ATP molecules are made
3. **Pyruvate formation** 🏁 - The final product is created

---

## 🤔 Think About This

- Why does the cell invest 2 ATP to eventually gain only 2 net ATP?
- How might glycolysis have evolved as one of the earliest metabolic pathways?`;
            
            const formatted = formatEducationalResponse(sampleResponse);
            document.getElementById('formatted-content').innerHTML = formatted;
        }
        
        // Auto-run the test when page loads
        testFormatting();
    </script>
</body>
</html>
